apiVersion: v1
kind: ConfigMap
metadata:
  # NOTE: `config/default/kustomization.yaml` applies `namePrefix: otterscale-operator-`,
  # so the final name in-cluster becomes `otterscale-operator-otterscale-modules`.
  # The manager Deployment sets `MODULE_TEMPLATES_CONFIGMAP_NAME` accordingly.
  name: otterscale-modules
data:
  modules.yaml: |
    - id: module-sample
      manifest: |
        apiVersion: kustomize.toolkit.fluxcd.io/v1
        kind: Kustomization
        metadata:
          name: module-sample
          namespace: flux-system
        spec:
          interval: 10m
          path: ./clusters/my-cluster/module-sample
          prune: true
          sourceRef:
            kind: GitRepository
            name: flux-system

